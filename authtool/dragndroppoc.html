<!DOCTYPE html>
<html>
	<head>
	<script language="JavaScript">
		var iPos = 0;
		function getTheElementsPosition(oParentNode,oElement)
		{
			try{
				var iParentNode = oParentNode.children.length;
				for(var i=0;i<iParentNode;i++)
				{
					if(oElement===oParentNode.children[i])
					{
						iPos = i;
						break;
					}
				}
				return iPos;
			}catch(e)
			{
				logError(e);
			}
		}
	
		function onMouseDown(oElement)
		{

					
					
			// item = document.elementFromPoint(80, 20);
			var oParentNode = oElement.parentNode;
			iPos = getTheElementsPosition(oParentNode,oElement);
			//if(document.elementFromPoint(5,5))
			//return;
			//var oClone = oElement.cloneNode(true);
			//oParentNode.insertBefore(oClone,oElement);
			//debugger;
			//debugger;
			//r//eturn;
			// (1) start the process
			// (2) prepare to moving: make absolute and on top by z-index
			oElement.style.position = 'absolute';
			oElement.style.zIndex = 1000;
			// ...and put that absolutely positioned element under the cursor
			oElement.onmousemove = function ()
			{
				//moveAt(event.pageX, event.pageY);
				moveAt(event.clientX, event.clientY);
			}
			
			// (4) drop the ball, remove unneeded handlers
			oElement.onmouseup = function() {
				if(document.removeEventListener)
				{ 
					document.removeEventListener('mousemove', onMouseMove);
				}else
				{
					document.detachEvent("onmousemove", onMouseMove);
					oElement.style.position = 'static';
					oElement.onmousemove = null;
					oElement.onmouseup = null;
				};
			}					
			
			// centers the oElement at (pageX, pageY) coordinates
			function moveAt(pageX, pageY){
				if(oElement)
				{				
					
					oElement.style.left = pageX - oElement.offsetWidth / 2 + 'px';
					oElement.style.top = pageY - oElement.offsetHeight / 2 + 'px';
					//document.getElementById("target").innerHTML = "X Coord = "+pageX+ "  Y Coord= "+pageY+" screen width= "+document.documentElement.clientWidth+" screen heght= "+document.documentElement.clientHeight+" Percentag="+((pageX/document.documentElement.clientWidth)*100)+" Percentag="+((pageY/document.documentElement.clientHeight)*100);
					
				var oBin = document.elementFromPoint(event.clientX, event.clientY);
				if(oBin)// && oBin.id==="bin")
					document.getElementById("target").innerHTML = oBin.id;			
					
					
					//if(((pageX/document.documentElement.clientWidth)*100)>95&&((pageY/document.documentElement.clientHeight)*100)<5){
					if(oBin && oBin.id==="bin")
					{	
						var bResult = confirm("Would you like to delete this element?");
						if(bResult){
						
							document.detachEvent("onmousemove", onMouseMove);
							oElement.onmousemove = null;
							oElement.onmouseup = null;
							oParentNode.removeChild(oElement);
							oElement = null;
						}else{
							oElement.style.position = 'static';
							oElement = null;
						}
					}else if(oBin && (oBin.name==="thetarget" || oBin.id==="target2"))
					{
						//var bResult = confirm("Would you like to add this element here?");
						//if(bResult){
							/*oBin.appendChild(oElement);
							oBin.style.position = 'static';
							oBin = null;*/
							var oBinParent = oBin.parentNode;
							oBin.style.borderBottom="1px solid black";
							oBinParent.insertBefore(oElement, oBin.nextSibling);
							//oBin.insertAfter(oElement);
							oElement.style.position = 'static';
							oElement = null;
						//}else{
						//	oElement.style.position = 'static';
						//	oElement = null;
						//}
					}
				}
			}			
			
			function onMouseMove(event) {
				moveAt(event.clientX, event.clientY);
			}
	
			if(document.addEventListener)
			{ 
				document.addEventListener('mousemove', onMouseMove);
			}else
			{
				document.attachEvent("onmousemove", onMouseMove);		
			}	
		}
		
	</script>
	</head>
	<body>
		<p>
			<ul  style="position:absolute">
				<li id="target1" name="thetarget">Target 1</li>
				<li id="target2" name="thetarget">Target 2</li>
				<li id="target3" name="thetarget">Target 3</li>
				<li id="target4" name="thetarget">Target 4</li>
			</ul>
		</p>
		<p style="width:100%;" align="right">
			<img  id="bin" src="C:\Program Files (x86)\CaseWare\Scripts\SA IFRS\HTML\bin.png" style="width:50px;height:50px;"align="right;margin-right:50%" alt="Bin is Here"/>
		</p><br>
		<br><br>
		<br><br>
		<br>
		<p>
		<ul width="100%" id="target3">
			<li style="min-width: 200px;" onmousedown="onMouseDown(this)" id="hello">Element 1</li>
			<li style="min-width: 200px;" onmousedown="onMouseDown(this)" id="hello2">Element 2</li>
			<li style="min-width: 200px;" onmousedown="onMouseDown(this)" id="hello3">Element 3</li>
			<li style="min-width: 200px;" onmousedown="onMouseDown(this)" id="hello4">Element 4</li>
			<li style="min-width: 200px;" onmousedown="onMouseDown(this)" id="hello5">Element 5</li>			
		</ul>
		</p>
		<br>
		</p>
		<p>
		<ul id="target" style="position:absolute">Target</ul>
		</p>		
	<body>
</html>
